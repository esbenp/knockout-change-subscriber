!function(n,r){"function"==typeof define&&define.amd?define(["knockout","knockout-mapping","jquery","underscore"],r):"object"==typeof exports?module.exports=r(require("knockout"),require("knockout-mapping"),require("jquery"),require("underscore")):n.ko=r(n.ko,n.ko,n.$,n._)}(this,function(n,r,e,t){return+function(n,e,t){t.mapping=t.mapping||r;var u=function(n,r){var r=r||null,e=o(t.unwrap(this));return this.subscribe(function(t){t instanceof Array?n.apply(this,f(t,e,r)):n(t,e),e=o(t)})},i=function(n,r){return null===r?JSON.stringify(n):n[r]},o=function(r){return r instanceof Array?r.slice():"object"==typeof r?n.extend(!0,{},r):r},c=function(n,r){var e={};for(var t in n)e[i(n[t],r)]=n[t];return e},f=function(n,r,e){var t=s(r),u=s(n),i=p(u,t,e),o=p(t,u,e),c=a(n,i),f=a(r,o);return[c,f]},a=function(n,r){var e=[];for(var t in n)r[t]===!1&&e.push(n[t]);return e},p=function(n,r,e){var t={},u=c(r,e);for(var o in n)t[o]=i(n[o],e)in u;return t},s=function(n){return t.mapping.toJS(n)};t.subscribable.fn.changeSubscriber=u}(e,t,n),n});