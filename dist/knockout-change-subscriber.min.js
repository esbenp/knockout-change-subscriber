!function(n,r){"function"==typeof define&&define.amd?define(["knockout","knockout-mapping","jquery","underscore"],r):"object"==typeof exports?module.exports=r(require("knockout"),require("knockout-mapping"),require("jquery"),require("underscore")):n.ko=r(n.ko,n.ko,n.$,n._)}(this,function(n,r,e,t){return+function(n,e){e.mapping=e.mapping||r;var t=function(n,r){var r=r||null,t=i(e.unwrap(this));return this.subscribe(function(e){e instanceof Array?n.apply(this,c(e,t,r)):n(e,t),t=i(e)})},u=function(n,r){return null===r?JSON.stringify(n):n[r]},i=function(r){return r instanceof Array?r.slice():"object"==typeof r?n.extend(!0,{},r):r},o=function(n,r){var e={};for(var t in n)e[u(n[t],r)]=n[t];return e},c=function(n,r,e){var t=p(r),u=p(n),i=a(u,t,e),o=a(t,u,e),c=f(n,i),s=f(r,o);return[c,s]},f=function(n,r){var e=[];for(var t in n)r[t]===!1&&e.push(n[t]);return e},a=function(n,r,e){var t={},i=o(r,e);for(var c in n)t[c]=u(n[c],e)in i;return t},p=function(n){return e.mapping.toJS(n)};e.subscribable.fn.changeSubscriber=t}(e,n),n});